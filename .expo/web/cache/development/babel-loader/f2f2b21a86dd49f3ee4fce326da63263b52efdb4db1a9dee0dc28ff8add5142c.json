{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useContext, useRef, useState } from \"react\";\nimport Context from \"../../context/Context\";\nimport { FirebaseRecaptchaVerifierModal } from \"expo-firebase-recaptcha\";\nimport { firebaseConfig } from \"../../config/confi\";\nimport firebase from 'firebase/compat/app';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function SignIn() {\n  var _useState = useState(\"\"),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(\"\"),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useState5 = useState(''),\n    _useState6 = _slicedToArray(_useState5, 2),\n    phoneNumber = _useState6[0],\n    setPhoneNumber = _useState6[1];\n  var _useState7 = useState(''),\n    _useState8 = _slicedToArray(_useState7, 2),\n    code = _useState8[0],\n    setCode = _useState8[1];\n  var _useState9 = useState(null),\n    _useState10 = _slicedToArray(_useState9, 2),\n    verificationId = _useState10[0],\n    setVerificationId = _useState10[1];\n  var recaptchaVerifier = useRef(null);\n  var _useState11 = useState(\"signUp\"),\n    _useState12 = _slicedToArray(_useState11, 2),\n    mode = _useState12[0],\n    setMode = _useState12[1];\n  var _useContext = useContext(Context),\n    colors = _useContext.theme.colors;\n  var handlePress = function handlePress() {\n    var phoneProvider = new firebase.auth.PhoneAuthProvider();\n    phoneProvider.verifyPhoneNumber(phoneNumber, recaptchaVerifier.current).then(setVerificationId);\n    setPhoneNumber('');\n  };\n  var confirmCode = function confirmCode() {\n    var credential = firebase.auth.PhoneAuthProvider.credential(verificationId, code);\n    firebase.auth().signInWithCredential(credential).then(function () {\n      setCode('');\n    }).catch(function (error) {\n      alert(error);\n    });\n    Alert.alert('Login Successful. Welcome to Dashboard.');\n  };\n  return _jsxs(View, {\n    style: {\n      justifyContent: \"center\",\n      alignItems: \"center\",\n      flex: 1,\n      backgroundColor: colors.white\n    },\n    children: [_jsx(FirebaseRecaptchaVerifierModal, {\n      ref: recaptchaVerifier,\n      firebaseConfig: firebaseConfig\n    }), _jsx(Text, {\n      style: {\n        color: colors.foreground,\n        fontSize: 24,\n        marginBottom: 20\n      },\n      children: \"Welcome To Whatsapp\"\n    }), _jsx(Image, {\n      source: require(\"../../assets/welcome-img.png\"),\n      style: {\n        width: 180,\n        height: 180\n      },\n      resizeMode: \"cover\"\n    }), _jsxs(View, {\n      style: {\n        marginTop: 20\n      },\n      children: [_jsx(TextInput, {\n        placeholder: \"phone Number with country code\",\n        keyboardType: 'phone-pad',\n        value: phoneNumber,\n        autoComplete: \"tel\",\n        onChangeText: setPhoneNumber,\n        style: {\n          borderBottomColor: colors.primary,\n          borderBottomWidth: 2,\n          width: 200\n        }\n      }), _jsx(View, {\n        style: {\n          marginTop: 20\n        },\n        children: _jsx(Button, {\n          title: \"Send Code\",\n          color: colors.secondary,\n          disabled: !phoneNumber,\n          onPress: handlePress\n        })\n      }), _jsx(TouchableOpacity, {\n        style: {\n          marginTop: 15\n        },\n        onPress: function onPress() {\n          return mode === \"SignUp\" ? setMode(\"SignIn\") : setMode(\"SignUp\");\n        },\n        children: _jsx(Text, {\n          style: {\n            color: colors.secondaryText\n          },\n          children: mode === \"SignUp\" ? \"Already have an account? SignIn\" : \"Don't have an account ? SignUp\"\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useContext","useRef","useState","Context","FirebaseRecaptchaVerifierModal","firebaseConfig","firebase","jsx","_jsx","jsxs","_jsxs","SignIn","_useState","_useState2","_slicedToArray","email","setEmail","_useState3","_useState4","password","setPassword","_useState5","_useState6","phoneNumber","setPhoneNumber","_useState7","_useState8","code","setCode","_useState9","_useState10","verificationId","setVerificationId","recaptchaVerifier","_useState11","_useState12","mode","setMode","_useContext","colors","theme","handlePress","phoneProvider","auth","PhoneAuthProvider","verifyPhoneNumber","current","then","confirmCode","credential","signInWithCredential","catch","error","alert","Alert","View","style","justifyContent","alignItems","flex","backgroundColor","white","children","ref","Text","color","foreground","fontSize","marginBottom","Image","source","require","width","height","resizeMode","marginTop","TextInput","placeholder","keyboardType","value","autoComplete","onChangeText","borderBottomColor","primary","borderBottomWidth","Button","title","secondary","disabled","onPress","TouchableOpacity","secondaryText"],"sources":["/home/evance/projects/Watsapp-react-native/src/screens/SignIn.tsx"],"sourcesContent":["\nimport {\n  View,\n  Text,\n  Image,\n  TextInput,\n  Button,\n  TouchableOpacity,\n  Alert,\n} from \"react-native\";\nimport React, { useContext, useRef, useState } from \"react\";\nimport Context from \"../../context/Context\";\nimport { auth, signIn, signUp } from \"../../config/firebase\";\nimport { RecaptchaVerifier, signInWithPhoneNumber } from 'firebase/auth';\nimport { FirebaseRecaptchaVerifierModal } from \"expo-firebase-recaptcha\";\nimport {firebaseConfig} from '../../config/confi'\nimport firebase from 'firebase/compat/app'\n\n    declare global {\n  interface Window { // ⚠️ notice that \"Window\" is capitalized here\n    recaptchaVerifier: any,\n    confirmationResult :any;\n  }\n}\n\nexport default function SignIn() {\n  const [email, setEmail] = useState<string>(\"\");\n  const [password, setPassword] = useState<string>(\"\");\n  const [phoneNumber, setPhoneNumber] = useState<any>('');\n  const [code, setCode] = useState<any>('');\n  const [verificationId, setVerificationId] = useState<any>(null);\n  const recaptchaVerifier = useRef<any>(null);\n\n  let [mode, setMode] = useState<string>(\"signUp\");\n  const {\n    theme: { colors },\n  } = useContext(Context);\n\n\n\n  const handlePress = () => {\n    const phoneProvider = new firebase.auth.PhoneAuthProvider();\n    phoneProvider\n      .verifyPhoneNumber(phoneNumber, recaptchaVerifier.current)\n      .then(setVerificationId);\n      setPhoneNumber('');\n};\n\nconst confirmCode = () => {\n  const credential = firebase.auth.PhoneAuthProvider.credential(\n    verificationId,\n    code\n  );\n  firebase\n    .auth()\n    .signInWithCredential(credential)\n    .then(() => {\n      setCode('');\n  })\n  .catch((error) => {\n    // show an alert in case of error\n    alert(error);\n  })\n  Alert.alert(\n    'Login Successful. Welcome to Dashboard.',\n  );\n  \n};\n\n\n /*  async function handlePress() {\n    if (mode === \"signUp\") {\n      await signUp(email, password);\n    }\n    if (mode === \"signIn\") {\n      await signIn(email, password);\n    }\n  } */\n\n\n\n  return (\n    <View\n      style={{\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        flex: 1,\n        backgroundColor: colors.white,\n      }}\n    >   \n    <FirebaseRecaptchaVerifierModal\n    ref={recaptchaVerifier}\n    firebaseConfig={firebaseConfig} \n/>\n      <Text\n        style={{ color: colors.foreground, fontSize: 24, marginBottom: 20 }}\n      >\n        Welcome To Whatsapp\n      </Text>\n      <Image\n        source={require(\"../../assets/welcome-img.png\")}\n        style={{ width: 180, height: 180 }}\n        resizeMode=\"cover\"\n      />\n      <View style={{ marginTop: 20 }}>\n        <TextInput\n          placeholder=\"phone Number with country code\"\n          keyboardType={'phone-pad'}\n          value={phoneNumber}\n          autoComplete ='tel' \n          onChangeText={setPhoneNumber}\n          style={{\n            borderBottomColor: colors.primary,\n            borderBottomWidth: 2,\n            width: 200,\n          }}\n        />\n{/*         <TextInput\n          placeholder=\"Password\"\n          secureTextEntry={true}\n          value={password}\n          onChangeText={setPassword}\n          style={{\n            borderBottomColor: colors.primary,\n            borderBottomWidth: 2,\n            width: 200,\n            marginTop: 20,\n          }}\n        /> */}\n        <View style={{ marginTop: 20 }}>\n          <Button\n            /* title={mode === \"SignUp\" ? \"Sign Up\" : \"Sign In\"} */\n            title=\"Send Code\"\n            color={colors.secondary}\n            disabled={!phoneNumber}\n            onPress={handlePress}\n          />\n        </View>\n\n        <TouchableOpacity\n          style={{ marginTop: 15 }}\n          onPress={() =>\n            mode === \"SignUp\" ? setMode(\"SignIn\") : setMode(\"SignUp\")\n          }\n        >\n          <Text style={{ color: colors.secondaryText }}>\n            {mode === \"SignUp\"\n              ? \"Already have an account? SignIn\"\n              : \"Don't have an account ? SignUp\"}\n          </Text>\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}